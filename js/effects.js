'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.finalize = exports.initialize = undefined;

var _scale = require('./scale.js');

var scale = _interopRequireWildcard(_scale);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

var editPanel = document.querySelector('.img-upload__overlay');
var scalePanel = editPanel.querySelector('.scale');
var effectLevel = scalePanel.querySelector('.scale__value');
var effectPanel = editPanel.querySelector('.effects');
var effectToggles = effectPanel.querySelectorAll('.effects__radio');
var defaultEffect = effectPanel.querySelector('#effect-none');
var uploadedPicture = editPanel.querySelector('.img-upload__preview > img');

var EFFECT_MAX_LEVEL = 100;

var effects = {
  chrome: {
    min: 0,
    max: 1,
    setFilter: function setFilter(value) {
      return 'grayscale(' + value + ')';
    }
  },
  sepia: {
    min: 0,
    max: 1,
    setFilter: function setFilter(value) {
      return 'sepia(' + value + ')';
    }
  },
  marvin: {
    min: 0,
    max: 100,
    setFilter: function setFilter(value) {
      return 'invert(' + value + '%)';
    }
  },
  phobos: {
    min: 0,
    max: 3,
    setFilter: function setFilter(value) {
      return 'blur(' + value + 'px)';
    }
  },
  heat: {
    min: 1,
    max: 3,
    setFilter: function setFilter(value) {
      return 'brightness(' + value + ')';
    }
  },
  none: {
    min: 0,
    max: 0,
    setFilter: function setFilter() {
      return 'none';
    }
  }
};

var currentPictureClass = void 0;

/**
 * Устанавливает класс загруженному изображению
 * в соответствии с effectName
 *
 * @param {string} effectName
 */
var setPictureClass = function setPictureClass(effectName) {
  if (currentPictureClass) {
    uploadedPicture.classList.remove(currentPictureClass);
  }
  uploadedPicture.classList.add('effects__preview--' + effectName);
  currentPictureClass = 'effects__preview--' + effectName;
};

/**
 * Возвращает отмасштабированное в соответствии с effectName
 * значение для эффекта
 *
 * @param {number} value Значение до масштабирования: от 0 до 100
 * @param {string} effectName Примененный эффект
 * @return {number} Отмасштабированное значение
 */
var getEffectValue = function getEffectValue(value, effectName) {
  var currentEffect = effects[effectName];
  return currentEffect.min + value * (currentEffect.max - currentEffect.min) / EFFECT_MAX_LEVEL;
};

/**
 * Устанавливает стиль для загруженного изображения
 * в зависимости от примененного эффекта effectName
 *
 * @param {string} effectName
 */
var setPictureEffect = function setPictureEffect(effectName) {
  var effectValue = getEffectValue(effectLevel.value, effectName);
  uploadedPicture.style.filter = effects[effectName].setFilter(effectValue);
};

/**
 * В зависимости от выбранного эффекта скрывает или показывает
 * ползунок scalePanel; передает эффект и функцию применения эффекта
 * для пина ползунка; устанавливает пин ползунка в максимальное
 * положение; устанавливает класс и стиль на загруженное изображение
 *
 * @param {Event} evt
 */
var onEffectToggleClick = function onEffectToggleClick(evt) {
  var selectedEffect = evt.target;
  if (selectedEffect === defaultEffect) {
    scale.hide();
  } else {
    scale.show();
    scale.setPinAction(selectedEffect.value, setPictureEffect);
  }
  scale.setPinPosition(EFFECT_MAX_LEVEL);
  setPictureClass(selectedEffect.value);
  setPictureEffect(selectedEffect.value);
};

/**
* Устанавливает обработчики событий на переключатели эффектов;
* устанавливает класс и стиль `без эффектов` загруженному изображению
* и скрывает ползунок scalePanel
*
*/
var initialize = exports.initialize = function initialize() {
  Array.from(effectToggles).forEach(function (effectToggle) {
    return effectToggle.addEventListener('click', onEffectToggleClick);
  });
  defaultEffect.checked = true;
  setPictureClass(defaultEffect.value);
  setPictureEffect(defaultEffect.value);
  scale.hide();
};

/**
* Удаляет обработчики событий с переключателей эффектов
*
*/
var finalize = exports.finalize = function finalize() {
  Array.from(effectToggles).forEach(function (effectToggle) {
    return effectToggle.removeEventListener('click', onEffectToggleClick);
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2pzL2VmZmVjdHMuanMiXSwibmFtZXMiOlsic2NhbGUiLCJlZGl0UGFuZWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzY2FsZVBhbmVsIiwiZWZmZWN0TGV2ZWwiLCJlZmZlY3RQYW5lbCIsImVmZmVjdFRvZ2dsZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGVmYXVsdEVmZmVjdCIsInVwbG9hZGVkUGljdHVyZSIsIkVGRkVDVF9NQVhfTEVWRUwiLCJlZmZlY3RzIiwiY2hyb21lIiwibWluIiwibWF4Iiwic2V0RmlsdGVyIiwidmFsdWUiLCJzZXBpYSIsIm1hcnZpbiIsInBob2JvcyIsImhlYXQiLCJub25lIiwiY3VycmVudFBpY3R1cmVDbGFzcyIsInNldFBpY3R1cmVDbGFzcyIsImVmZmVjdE5hbWUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJnZXRFZmZlY3RWYWx1ZSIsImN1cnJlbnRFZmZlY3QiLCJzZXRQaWN0dXJlRWZmZWN0IiwiZWZmZWN0VmFsdWUiLCJzdHlsZSIsImZpbHRlciIsIm9uRWZmZWN0VG9nZ2xlQ2xpY2siLCJldnQiLCJzZWxlY3RlZEVmZmVjdCIsInRhcmdldCIsImhpZGUiLCJzaG93Iiwic2V0UGluQWN0aW9uIiwic2V0UGluUG9zaXRpb24iLCJpbml0aWFsaXplIiwiQXJyYXkiLCJmcm9tIiwiZm9yRWFjaCIsImVmZmVjdFRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja2VkIiwiZmluYWxpemUiLCJyZW1vdmVFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0lBQVlBLEs7Ozs7QUFFWixJQUFNQyxZQUFZQyxTQUFTQyxhQUFULHdCQUFsQjtBQUNBLElBQU1DLGFBQWFILFVBQVVFLGFBQVYsVUFBbkI7QUFDQSxJQUFNRSxjQUFjRCxXQUFXRCxhQUFYLGlCQUFwQjtBQUNBLElBQU1HLGNBQWNMLFVBQVVFLGFBQVYsWUFBcEI7QUFDQSxJQUFNSSxnQkFBZ0JELFlBQVlFLGdCQUFaLG1CQUF0QjtBQUNBLElBQU1DLGdCQUFnQkgsWUFBWUgsYUFBWixnQkFBdEI7QUFDQSxJQUFNTyxrQkFBa0JULFVBQVVFLGFBQVYsOEJBQXhCOztBQUVBLElBQU1RLG1CQUFtQixHQUF6Qjs7QUFFQSxJQUFNQyxVQUFVO0FBQ2RDLFVBQVE7QUFDTkMsU0FBSyxDQURDO0FBRU5DLFNBQUssQ0FGQztBQUdOQyxlQUFXLG1CQUFDQyxLQUFEO0FBQUEsNEJBQXdCQSxLQUF4QjtBQUFBO0FBSEwsR0FETTtBQU1kQyxTQUFPO0FBQ0xKLFNBQUssQ0FEQTtBQUVMQyxTQUFLLENBRkE7QUFHTEMsZUFBVyxtQkFBQ0MsS0FBRDtBQUFBLHdCQUFvQkEsS0FBcEI7QUFBQTtBQUhOLEdBTk87QUFXZEUsVUFBUTtBQUNOTCxTQUFLLENBREM7QUFFTkMsU0FBSyxHQUZDO0FBR05DLGVBQVcsbUJBQUNDLEtBQUQ7QUFBQSx5QkFBcUJBLEtBQXJCO0FBQUE7QUFITCxHQVhNO0FBZ0JkRyxVQUFRO0FBQ05OLFNBQUssQ0FEQztBQUVOQyxTQUFLLENBRkM7QUFHTkMsZUFBVyxtQkFBQ0MsS0FBRDtBQUFBLHVCQUFtQkEsS0FBbkI7QUFBQTtBQUhMLEdBaEJNO0FBcUJkSSxRQUFNO0FBQ0pQLFNBQUssQ0FERDtBQUVKQyxTQUFLLENBRkQ7QUFHSkMsZUFBVyxtQkFBQ0MsS0FBRDtBQUFBLDZCQUF5QkEsS0FBekI7QUFBQTtBQUhQLEdBckJRO0FBMEJkSyxRQUFNO0FBQ0pSLFNBQUssQ0FERDtBQUVKQyxTQUFLLENBRkQ7QUFHSkMsZUFBVztBQUFBO0FBQUE7QUFIUDtBQTFCUSxDQUFoQjs7QUFpQ0EsSUFBSU8sNEJBQUo7O0FBRUE7Ozs7OztBQU1BLElBQU1DLGtCQUFrQixTQUFsQkEsZUFBa0IsQ0FBQ0MsVUFBRCxFQUFnQjtBQUN0QyxNQUFJRixtQkFBSixFQUF5QjtBQUN2QmIsb0JBQWdCZ0IsU0FBaEIsQ0FBMEJDLE1BQTFCLENBQWlDSixtQkFBakM7QUFDRDtBQUNEYixrQkFBZ0JnQixTQUFoQixDQUEwQkUsR0FBMUIsd0JBQW1ESCxVQUFuRDtBQUNBRiwrQ0FBMkNFLFVBQTNDO0FBQ0QsQ0FORDs7QUFRQTs7Ozs7Ozs7QUFRQSxJQUFNSSxpQkFBaUIsU0FBakJBLGNBQWlCLENBQUNaLEtBQUQsRUFBUVEsVUFBUixFQUF1QjtBQUM1QyxNQUFNSyxnQkFBZ0JsQixRQUFRYSxVQUFSLENBQXRCO0FBQ0EsU0FBT0ssY0FBY2hCLEdBQWQsR0FBb0JHLFNBQVNhLGNBQWNmLEdBQWQsR0FBb0JlLGNBQWNoQixHQUEzQyxJQUFrREgsZ0JBQTdFO0FBQ0QsQ0FIRDs7QUFLQTs7Ozs7O0FBTUEsSUFBTW9CLG1CQUFtQixTQUFuQkEsZ0JBQW1CLENBQUNOLFVBQUQsRUFBZ0I7QUFDdkMsTUFBTU8sY0FBY0gsZUFBZXhCLFlBQVlZLEtBQTNCLEVBQWtDUSxVQUFsQyxDQUFwQjtBQUNBZixrQkFBZ0J1QixLQUFoQixDQUFzQkMsTUFBdEIsR0FBK0J0QixRQUFRYSxVQUFSLEVBQW9CVCxTQUFwQixDQUE4QmdCLFdBQTlCLENBQS9CO0FBQ0QsQ0FIRDs7QUFLQTs7Ozs7Ozs7QUFRQSxJQUFNRyxzQkFBc0IsU0FBdEJBLG1CQUFzQixDQUFDQyxHQUFELEVBQVM7QUFDbkMsTUFBTUMsaUJBQWlCRCxJQUFJRSxNQUEzQjtBQUNBLE1BQUlELG1CQUFtQjVCLGFBQXZCLEVBQXNDO0FBQ3BDVCxVQUFNdUMsSUFBTjtBQUNELEdBRkQsTUFFTztBQUNMdkMsVUFBTXdDLElBQU47QUFDQXhDLFVBQU15QyxZQUFOLENBQW1CSixlQUFlcEIsS0FBbEMsRUFBeUNjLGdCQUF6QztBQUNEO0FBQ0QvQixRQUFNMEMsY0FBTixDQUFxQi9CLGdCQUFyQjtBQUNBYSxrQkFBZ0JhLGVBQWVwQixLQUEvQjtBQUNBYyxtQkFBaUJNLGVBQWVwQixLQUFoQztBQUNELENBWEQ7O0FBYU87Ozs7OztBQU1QLElBQU0wQixrQ0FBYSxTQUFiQSxVQUFhLEdBQU07QUFDdkJDLFFBQU1DLElBQU4sQ0FBV3RDLGFBQVgsRUFBMEJ1QyxPQUExQixDQUFrQyxVQUFDQyxZQUFEO0FBQUEsV0FDaENBLGFBQWFDLGdCQUFiLFVBQXVDYixtQkFBdkMsQ0FEZ0M7QUFBQSxHQUFsQztBQUVBMUIsZ0JBQWN3QyxPQUFkLEdBQXdCLElBQXhCO0FBQ0F6QixrQkFBZ0JmLGNBQWNRLEtBQTlCO0FBQ0FjLG1CQUFpQnRCLGNBQWNRLEtBQS9CO0FBQ0FqQixRQUFNdUMsSUFBTjtBQUNELENBUEQ7O0FBU087Ozs7QUFJUCxJQUFNVyw4QkFBVyxTQUFYQSxRQUFXLEdBQU07QUFDckJOLFFBQU1DLElBQU4sQ0FBV3RDLGFBQVgsRUFBMEJ1QyxPQUExQixDQUFrQyxVQUFDQyxZQUFEO0FBQUEsV0FDaENBLGFBQWFJLG1CQUFiLFVBQTBDaEIsbUJBQTFDLENBRGdDO0FBQUEsR0FBbEM7QUFFRCxDQUhEIiwiZmlsZSI6ImVmZmVjdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBzY2FsZSBmcm9tICcuL3NjYWxlLmpzJztcblxuY29uc3QgZWRpdFBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmltZy11cGxvYWRfX292ZXJsYXlgKTtcbmNvbnN0IHNjYWxlUGFuZWwgPSBlZGl0UGFuZWwucXVlcnlTZWxlY3RvcihgLnNjYWxlYCk7XG5jb25zdCBlZmZlY3RMZXZlbCA9IHNjYWxlUGFuZWwucXVlcnlTZWxlY3RvcihgLnNjYWxlX192YWx1ZWApO1xuY29uc3QgZWZmZWN0UGFuZWwgPSBlZGl0UGFuZWwucXVlcnlTZWxlY3RvcihgLmVmZmVjdHNgKTtcbmNvbnN0IGVmZmVjdFRvZ2dsZXMgPSBlZmZlY3RQYW5lbC5xdWVyeVNlbGVjdG9yQWxsKGAuZWZmZWN0c19fcmFkaW9gKTtcbmNvbnN0IGRlZmF1bHRFZmZlY3QgPSBlZmZlY3RQYW5lbC5xdWVyeVNlbGVjdG9yKGAjZWZmZWN0LW5vbmVgKTtcbmNvbnN0IHVwbG9hZGVkUGljdHVyZSA9IGVkaXRQYW5lbC5xdWVyeVNlbGVjdG9yKGAuaW1nLXVwbG9hZF9fcHJldmlldyA+IGltZ2ApO1xuXG5jb25zdCBFRkZFQ1RfTUFYX0xFVkVMID0gMTAwO1xuXG5jb25zdCBlZmZlY3RzID0ge1xuICBjaHJvbWU6IHtcbiAgICBtaW46IDAsXG4gICAgbWF4OiAxLFxuICAgIHNldEZpbHRlcjogKHZhbHVlKSA9PiBgZ3JheXNjYWxlKCR7dmFsdWV9KWBcbiAgfSxcbiAgc2VwaWE6IHtcbiAgICBtaW46IDAsXG4gICAgbWF4OiAxLFxuICAgIHNldEZpbHRlcjogKHZhbHVlKSA9PiBgc2VwaWEoJHt2YWx1ZX0pYFxuICB9LFxuICBtYXJ2aW46IHtcbiAgICBtaW46IDAsXG4gICAgbWF4OiAxMDAsXG4gICAgc2V0RmlsdGVyOiAodmFsdWUpID0+IGBpbnZlcnQoJHt2YWx1ZX0lKWBcbiAgfSxcbiAgcGhvYm9zOiB7XG4gICAgbWluOiAwLFxuICAgIG1heDogMyxcbiAgICBzZXRGaWx0ZXI6ICh2YWx1ZSkgPT4gYGJsdXIoJHt2YWx1ZX1weClgXG4gIH0sXG4gIGhlYXQ6IHtcbiAgICBtaW46IDEsXG4gICAgbWF4OiAzLFxuICAgIHNldEZpbHRlcjogKHZhbHVlKSA9PiBgYnJpZ2h0bmVzcygke3ZhbHVlfSlgXG4gIH0sXG4gIG5vbmU6IHtcbiAgICBtaW46IDAsXG4gICAgbWF4OiAwLFxuICAgIHNldEZpbHRlcjogKCkgPT4gYG5vbmVgXG4gIH1cbn07XG5cbmxldCBjdXJyZW50UGljdHVyZUNsYXNzO1xuXG4vKipcbiAqINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC60LvQsNGB0YEg0LfQsNCz0YDRg9C20LXQvdC90L7QvNGDINC40LfQvtCx0YDQsNC20LXQvdC40Y5cbiAqINCyINGB0L7QvtGC0LLQtdGC0YHRgtCy0LjQuCDRgSBlZmZlY3ROYW1lXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGVmZmVjdE5hbWVcbiAqL1xuY29uc3Qgc2V0UGljdHVyZUNsYXNzID0gKGVmZmVjdE5hbWUpID0+IHtcbiAgaWYgKGN1cnJlbnRQaWN0dXJlQ2xhc3MpIHtcbiAgICB1cGxvYWRlZFBpY3R1cmUuY2xhc3NMaXN0LnJlbW92ZShjdXJyZW50UGljdHVyZUNsYXNzKTtcbiAgfVxuICB1cGxvYWRlZFBpY3R1cmUuY2xhc3NMaXN0LmFkZChgZWZmZWN0c19fcHJldmlldy0tJHtlZmZlY3ROYW1lfWApO1xuICBjdXJyZW50UGljdHVyZUNsYXNzID0gYGVmZmVjdHNfX3ByZXZpZXctLSR7ZWZmZWN0TmFtZX1gO1xufTtcblxuLyoqXG4gKiDQktC+0LfQstGA0LDRidCw0LXRgiDQvtGC0LzQsNGB0YjRgtCw0LHQuNGA0L7QstCw0L3QvdC+0LUg0LIg0YHQvtC+0YLQstC10YLRgdGC0LLQuNC4INGBIGVmZmVjdE5hbWVcbiAqINC30L3QsNGH0LXQvdC40LUg0LTQu9GPINGN0YTRhNC10LrRgtCwXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlINCX0L3QsNGH0LXQvdC40LUg0LTQviDQvNCw0YHRiNGC0LDQsdC40YDQvtCy0LDQvdC40Y86INC+0YIgMCDQtNC+IDEwMFxuICogQHBhcmFtIHtzdHJpbmd9IGVmZmVjdE5hbWUg0J/RgNC40LzQtdC90LXQvdC90YvQuSDRjdGE0YTQtdC60YJcbiAqIEByZXR1cm4ge251bWJlcn0g0J7RgtC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90L3QvtC1INC30L3QsNGH0LXQvdC40LVcbiAqL1xuY29uc3QgZ2V0RWZmZWN0VmFsdWUgPSAodmFsdWUsIGVmZmVjdE5hbWUpID0+IHtcbiAgY29uc3QgY3VycmVudEVmZmVjdCA9IGVmZmVjdHNbZWZmZWN0TmFtZV07XG4gIHJldHVybiBjdXJyZW50RWZmZWN0Lm1pbiArIHZhbHVlICogKGN1cnJlbnRFZmZlY3QubWF4IC0gY3VycmVudEVmZmVjdC5taW4pIC8gRUZGRUNUX01BWF9MRVZFTDtcbn07XG5cbi8qKlxuICog0KPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0YHRgtC40LvRjCDQtNC70Y8g0LfQsNCz0YDRg9C20LXQvdC90L7Qs9C+INC40LfQvtCx0YDQsNC20LXQvdC40Y9cbiAqINCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDQv9GA0LjQvNC10L3QtdC90L3QvtCz0L4g0Y3RhNGE0LXQutGC0LAgZWZmZWN0TmFtZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlZmZlY3ROYW1lXG4gKi9cbmNvbnN0IHNldFBpY3R1cmVFZmZlY3QgPSAoZWZmZWN0TmFtZSkgPT4ge1xuICBjb25zdCBlZmZlY3RWYWx1ZSA9IGdldEVmZmVjdFZhbHVlKGVmZmVjdExldmVsLnZhbHVlLCBlZmZlY3ROYW1lKTtcbiAgdXBsb2FkZWRQaWN0dXJlLnN0eWxlLmZpbHRlciA9IGVmZmVjdHNbZWZmZWN0TmFtZV0uc2V0RmlsdGVyKGVmZmVjdFZhbHVlKTtcbn07XG5cbi8qKlxuICog0JIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCINCy0YvQsdGA0LDQvdC90L7Qs9C+INGN0YTRhNC10LrRgtCwINGB0LrRgNGL0LLQsNC10YIg0LjQu9C4INC/0L7QutCw0LfRi9Cy0LDQtdGCXG4gKiDQv9C+0LvQt9GD0L3QvtC6IHNjYWxlUGFuZWw7INC/0LXRgNC10LTQsNC10YIg0Y3RhNGE0LXQutGCINC4INGE0YPQvdC60YbQuNGOINC/0YDQuNC80LXQvdC10L3QuNGPINGN0YTRhNC10LrRgtCwXG4gKiDQtNC70Y8g0L/QuNC90LAg0L/QvtC70LfRg9C90LrQsDsg0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0L/QuNC9INC/0L7Qu9C30YPQvdC60LAg0LIg0LzQsNC60YHQuNC80LDQu9GM0L3QvtC1XG4gKiDQv9C+0LvQvtC20LXQvdC40LU7INGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC60LvQsNGB0YEg0Lgg0YHRgtC40LvRjCDQvdCwINC30LDQs9GA0YPQttC10L3QvdC+0LUg0LjQt9C+0LHRgNCw0LbQtdC90LjQtVxuICpcbiAqIEBwYXJhbSB7RXZlbnR9IGV2dFxuICovXG5jb25zdCBvbkVmZmVjdFRvZ2dsZUNsaWNrID0gKGV2dCkgPT4ge1xuICBjb25zdCBzZWxlY3RlZEVmZmVjdCA9IGV2dC50YXJnZXQ7XG4gIGlmIChzZWxlY3RlZEVmZmVjdCA9PT0gZGVmYXVsdEVmZmVjdCkge1xuICAgIHNjYWxlLmhpZGUoKTtcbiAgfSBlbHNlIHtcbiAgICBzY2FsZS5zaG93KCk7XG4gICAgc2NhbGUuc2V0UGluQWN0aW9uKHNlbGVjdGVkRWZmZWN0LnZhbHVlLCBzZXRQaWN0dXJlRWZmZWN0KTtcbiAgfVxuICBzY2FsZS5zZXRQaW5Qb3NpdGlvbihFRkZFQ1RfTUFYX0xFVkVMKTtcbiAgc2V0UGljdHVyZUNsYXNzKHNlbGVjdGVkRWZmZWN0LnZhbHVlKTtcbiAgc2V0UGljdHVyZUVmZmVjdChzZWxlY3RlZEVmZmVjdC52YWx1ZSk7XG59O1xuXG5leHBvcnQgLyoqXG4gKiDQo9GB0YLQsNC90LDQstC70LjQstCw0LXRgiDQvtCx0YDQsNCx0L7RgtGH0LjQutC4INGB0L7QsdGL0YLQuNC5INC90LAg0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Lgg0Y3RhNGE0LXQutGC0L7QsjtcbiAqINGD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC60LvQsNGB0YEg0Lgg0YHRgtC40LvRjCBg0LHQtdC3INGN0YTRhNC10LrRgtC+0LJgINC30LDQs9GA0YPQttC10L3QvdC+0LzRgyDQuNC30L7QsdGA0LDQttC10L3QuNGOXG4gKiDQuCDRgdC60YDRi9Cy0LDQtdGCINC/0L7Qu9C30YPQvdC+0Logc2NhbGVQYW5lbFxuICpcbiAqL1xuY29uc3QgaW5pdGlhbGl6ZSA9ICgpID0+IHtcbiAgQXJyYXkuZnJvbShlZmZlY3RUb2dnbGVzKS5mb3JFYWNoKChlZmZlY3RUb2dnbGUpID0+XG4gICAgZWZmZWN0VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb25FZmZlY3RUb2dnbGVDbGljaykpO1xuICBkZWZhdWx0RWZmZWN0LmNoZWNrZWQgPSB0cnVlO1xuICBzZXRQaWN0dXJlQ2xhc3MoZGVmYXVsdEVmZmVjdC52YWx1ZSk7XG4gIHNldFBpY3R1cmVFZmZlY3QoZGVmYXVsdEVmZmVjdC52YWx1ZSk7XG4gIHNjYWxlLmhpZGUoKTtcbn07XG5cbmV4cG9ydCAvKipcbiAqINCj0LTQsNC70Y/QtdGCINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0YHQvtCx0YvRgtC40Lkg0YEg0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70LXQuSDRjdGE0YTQtdC60YLQvtCyXG4gKlxuICovXG5jb25zdCBmaW5hbGl6ZSA9ICgpID0+IHtcbiAgQXJyYXkuZnJvbShlZmZlY3RUb2dnbGVzKS5mb3JFYWNoKChlZmZlY3RUb2dnbGUpID0+XG4gICAgZWZmZWN0VG9nZ2xlLnJlbW92ZUV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgb25FZmZlY3RUb2dnbGVDbGljaykpO1xufTtcbiJdfQ==